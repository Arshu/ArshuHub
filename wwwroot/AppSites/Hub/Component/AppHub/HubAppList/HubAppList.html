{{VIEWPLACEHOLDER}}

<div style="margin: 10px auto; padding:5px; background-color:white;color:black;">

    <div style="margin:5px; padding:10px;text-align:center;display:none;" class="ar-notification" id="{{$ViewID}}ResponseContainer">
        <button class="ar-delete" onclick="hideElm('{{$ViewID}}ResponseContainer')"></button>
        <div id="{{$ViewID}}Response"></div>
    </div>

    <table style="width:100%;" class="pure-table pure-table-bordered pure-table-striped">
        {{HubAppListHeader}}
        <tbody>
            {{@HubMappingList}}
            <tr style="background-color: gray;">
                <td colspan="4" style="padding-left:5px; font-size:large;text-align:left;">
                    {{$HubMappingTitle}}
                </td>
            </tr>
            <tr style="background-color: gray;">
                <td colspan="4" style="padding-left:5px;font-size:large;text-align:left;">
                    {{$HubMappingDescription}}
                </td>
            </tr>
            <tr style="background-color: gray;">
                <td style="width:40px;">
                    <buttton onclick="openAppUrl('{{$HubMappingDomain}}')" style="text-align:center;" class="ar-border" {{^HubMappingIsPublic}}disabled="disabled"{{ /HubMappingIsPublic}}>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z" />
                            <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z" />
                        </svg>
                    </buttton>
                </td>
                <td style="text-align:center;font-size:large;">
                    {{$HubMappingDomain}}
                    <div style="font-size:x-small">
                        {{$HubRepositoryInfo}} [{{$HubContentSizeText}}]
                    </div>
                </td>
                <td style="text-align:center;width:100px;">
                    <button class="ar-button ar-border" style="width:100%;" {{^HubMappingCanDownload}}disabled="disabled" {{ /HubMappingCanDownload}}>
                        Download
                    </button>
                </td>
            </tr>
            {{/HubMappingList}}
            {{^HubMappingList}}
            <tr style="background-color: gray;">
                <td colspan="4" style="text-align:center;">
                    No Public Hub App's Found
                </td>
            </tr>
            {{/HubMappingList}}
        </tbody>
        {{HubAppListFooter}}
    </table>

</div>

<script>

    function openAppUrl(mappingDomainName)
    {
        if ((mappingDomainName.trim().length > 0) && (mappingDomainName.indexOf(".") > -1))
        {
            if (window.location.hostname.toLowerCase() != 'localhost')
            {
                let rootDomainWithoutSubDomain = mappingDomainName;
                let subDomain = "";
                let parts = mappingDomainName.split(".");
                if (parts.length == 2)
                {
                    rootDomainWithoutSubDomain = parts[1];
                    subDomain = parts[0];
                }
                else if (parts.length == 3)
                {
                    rootDomainWithoutSubDomain = parts[1] + "." + parts[2];
                    subDomain = parts[0];
                }
                if (window.location.hostname.indexOf(rootDomainWithoutSubDomain) > -1)
                {
                    let url = window.location.protocol + "//" + mappingDomainName;
                    if ((window.location.port != 80) && (window.location.port != 443))
                    {
                        url = url + ":" + window.location.port;
                    }
                    window.open(url, '_blank');
                }
            }
        }
    }

    
</script>

